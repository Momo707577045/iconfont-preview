<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="keywords" content="iconfont preview for web">
  <meta name="description" content="iconfont preview for web, Momo's Blog, LuckyMomo">
  <title>Iconfont Preview</title>
  <style>
    /*ÂÖ®Â±ÄËÆæÁΩÆ*/
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      /* background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ec 100%); */
      background: white;
      min-height: 100vh;
      margin: 0;
    }

    body::-webkit-scrollbar {
      display: none
    }

    p {
      margin: 0;
    }

    [v-cloak] {
      display: none;
    }

    #iconfont-preview {
      padding: 20px 50px 100px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .p-action {
      margin: 20px auto 30px;
      max-width: 1100px;
      width: 100%;
      font-size: 32px;
      text-align: center;
      font-weight: 700;
      color: #2c3e50;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.05);
    }

    .p-reset,
    .p-copy-type,
    .p-change-background,
    .p-show-all {
      position: absolute;
      top: 38px;
      right: 100px;
      padding: 10px 24px;
      font-size: 16px;
      color: white;
      cursor: pointer;
      border-radius: 8px;
      border: none;
      background: linear-gradient(135deg, #3D8AC7 0%, #2980b9 100%);
      box-shadow: 0 4px 15px rgba(61, 138, 199, 0.3);
      opacity: 1;
      transition: all 0.3s ease;
      font-weight: 500;
    }

    .p-reset:hover,
    .p-copy-type:hover,
    .p-change-background:hover,
    .p-show-all:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(61, 138, 199, 0.4);
    }

    .p-copy-type {
      left: 100px;
      right: auto;
    }

    .p-show-all {
      right: 245px;
    }

    .p-change-background {
      left: 260px;
      right: auto;
    }

    .p-github,
    .p-tamper,
    .p-other,
    .p-node-script {
      position: fixed;
      right: 50px;
      bottom: 70px;
      background: white;
      color: #24292e;
      border: 1px solid rgba(27, 31, 35, .15);
      border-radius: 8px;
      cursor: pointer;
      display: inline-block;
      font-size: 13px;
      font-weight: 600;
      line-height: 20px;
      padding: 8px 16px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
      z-index: 2;
    }

    .p-github:hover,
    .p-tamper:hover,
    .p-other:hover,
    .p-node-script:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      border-color: #3D8AC7;
      color: #3D8AC7;
    }

    .p-node-script {
      background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
      color: white !important;
      border: none;
      text-decoration: none;
    }

    .p-node-script:hover {
      color: white !important;
      border: none;
      box-shadow: 0 6px 20px rgba(46, 204, 113, 0.4);
      transform: translateY(-2px);
    }

    /* ÊÇ¨ÊµÆÊèêÁ§∫Ê†∑Âºè */
    .p-tooltip {
      position: relative;
    }

    .p-tooltip::before {
      content: attr(data-tooltip);
      position: absolute;
      right: 100%;
      top: 50%;
      transform: translateY(-50%);
      margin-right: 12px;
      padding: 10px 14px;
      background: #333;
      color: white;
      font-size: 12px;
      font-weight: 500;
      line-height: 1.5;
      border-radius: 8px;
      white-space: nowrap;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      z-index: 100;
    }

    .p-tooltip::after {
      content: '';
      position: absolute;
      right: 100%;
      top: 50%;
      transform: translateY(-50%);
      margin-right: 4px;
      border: 6px solid transparent;
      border-left-color: #333;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .p-tooltip:hover::before,
    .p-tooltip:hover::after {
      opacity: 1;
      visibility: visible;
    }

    .p-help {
      position: fixed;
      right: 50px;
      top: 50px;
      width: 36px;
      height: 36px;
      color: #666666;
      z-index: 2;
      line-height: 36px;
      font-weight: bolder;
      border-radius: 50%;
      border: 1px solid rgba(27, 31, 35, .15);
      cursor: pointer;
      text-align: center;
      background: white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }

    .p-help:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .p-node-script {
      bottom: 30px;
    }

    .p-other {
      bottom: 70px;
    }

    .p-tamper {
      bottom: 110px;
    }

    .p-github {
      bottom: 140px;
    }

    /* ÂäüËÉΩÂå∫ÂüüÂÆπÂô® */
    .p-section-container {
      margin: 20px auto;
      max-width: 1100px;
      padding: 28px;
      border: none;
      border-radius: 16px;
      background: white;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }

    .p-section-title {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: 600;
      color: #333;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid #f0f0f0;
    }

    .p-section-title svg {
      margin-right: 10px;
      color: #3D8AC7;
    }

    .p-section-title .badge {
      margin-left: 10px;
      font-size: 12px;
      padding: 3px 10px;
      border-radius: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      font-weight: 500;
    }

    /* Êú¨Âú∞Â≠ó‰ΩìÈÄâÊã©Âô®Ê†∑Âºè */
    .p-local-fonts-container {
      margin: 20px auto;
      max-width: 1100px;
      padding: 28px;
      border: none;
      border-radius: 16px;
      background: white;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }

    .p-local-fonts-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid #f0f0f0;
    }

    .p-local-fonts-title {
      font-size: 18px;
      font-weight: 600;
      color: #333;
      display: flex;
      align-items: center;
    }

    .p-local-fonts-title svg {
      margin-right: 12px;
      color: #3D8AC7;
    }

    .p-local-fonts-title .local-badge {
      margin-left: 12px;
      font-size: 11px;
      padding: 3px 10px;
      border-radius: 20px;
      background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
      color: white;
      font-weight: 500;
    }

    .p-local-fonts-status {
      font-size: 13px;
      color: #666;
      padding: 6px 16px;
      border-radius: 20px;
      background-color: #f0f0f0;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .p-local-fonts-status.connected {
      background: linear-gradient(135deg, #e6f7e6 0%, #c8f7c5 100%);
      color: #2e7d32;
    }

    .p-local-fonts-status.error {
      background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
      color: #c62828;
    }

    .p-local-fonts-list {
      max-height: 280px;
      overflow-y: auto;
      margin-bottom: 20px;
      padding: 5px;
    }

    .p-local-fonts-list::-webkit-scrollbar {
      width: 6px;
    }

    .p-local-fonts-list::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 3px;
    }

    .p-local-fonts-list::-webkit-scrollbar-thumb {
      background: #c1c1c1;
      border-radius: 3px;
    }

    .p-local-fonts-list::-webkit-scrollbar-thumb:hover {
      background: #a8a8a8;
    }

    .p-font-item {
      display: flex;
      align-items: center;
      padding: 14px 18px;
      margin: 10px 0;
      background: linear-gradient(135deg, #fafafa 0%, #f5f5f5 100%);
      border: 2px solid transparent;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .p-font-item:hover {
      border-color: #3D8AC7;
      background: white;
      box-shadow: 0 4px 15px rgba(61, 138, 199, 0.15);
      transform: translateX(5px);
    }

    .p-font-item.selected {
      border-color: #3D8AC7;
      background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
      box-shadow: 0 4px 15px rgba(61, 138, 199, 0.2);
    }

    .p-font-item input[type="radio"] {
      margin-right: 14px;
      width: 20px;
      height: 20px;
      cursor: pointer;
      accent-color: #3D8AC7;
    }

    .p-font-item-info {
      flex: 1;
      text-align: left;
    }

    .p-font-item-name {
      font-size: 15px;
      font-weight: 600;
      color: #333;
    }

    .p-font-item-path {
      font-size: 12px;
      color: #888;
      margin-top: 4px;
      font-family: 'Monaco', 'Menlo', monospace;
    }

    .p-font-item-size {
      font-size: 12px;
      color: #666;
      background: white;
      padding: 5px 12px;
      border-radius: 20px;
      font-weight: 500;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    .p-local-fonts-actions {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 20px;
    }

    .p-local-fonts-btn {
      padding: 14px 36px;
      font-size: 15px;
      color: white;
      cursor: pointer;
      border-radius: 10px;
      border: none;
      background: linear-gradient(135deg, #3D8AC7 0%, #2980b9 100%);
      box-shadow: 0 4px 15px rgba(61, 138, 199, 0.3);
      transition: all 0.3s ease;
      font-weight: 600;
    }

    .p-local-fonts-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(61, 138, 199, 0.4);
    }

    .p-local-fonts-btn:disabled {
      background: linear-gradient(135deg, #bdc3c7 0%, #95a5a6 100%);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .p-local-fonts-btn.secondary {
      background: white;
      color: #666;
      border: 2px solid #e0e0e0;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    .p-local-fonts-btn.secondary:hover {
      border-color: #3D8AC7;
      color: #3D8AC7;
      background: #f8fbff;
    }

    .p-local-fonts-empty {
      text-align: center;
      padding: 50px 20px;
      color: #888;
    }

    .p-local-fonts-empty p {
      margin-bottom: 10px;
    }

    .p-local-fonts-loading {
      text-align: center;
      padding: 50px 20px;
      color: #666;
    }

    .p-local-fonts-loading .spinner {
      display: inline-block;
      width: 40px;
      height: 40px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #3D8AC7;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin-bottom: 15px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .p-scan-path {
      font-size: 12px;
      color: #999;
      margin-top: 15px;
      word-break: break-all;
      text-align: center;
      font-family: 'Monaco', 'Menlo', monospace;
      background: #f8f8f8;
      padding: 8px 15px;
      border-radius: 6px;
    }

    /* ÂàÜÈöîÁ∫øÊ†∑Âºè */
    .p-divider {
      display: flex;
      align-items: center;
      margin: 30px auto;
      max-width: 1100px;
    }

    .p-divider::before,
    .p-divider::after {
      content: '';
      flex: 1;
      height: 2px;
      background: linear-gradient(90deg, transparent, #e0e0e0, transparent);
    }

    .p-divider-text {
      padding: 0 20px;
      color: #999;
      font-size: 14px;
      font-weight: 500;
    }

    /*Â≠ó‰ΩìÊñá‰ª∂ËΩΩÂÖ•*/
    .p-input-container {
      margin: 20px auto;
      max-width: 1100px;
      padding: 28px;
      border: none;
      border-radius: 16px;
      background: white;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }

    .p-input-container .section-header {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: 600;
      color: #333;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 2px solid #f0f0f0;
    }

    .p-input-container .section-header svg {
      margin-right: 10px;
      color: #e74c3c;
    }

    .p-input-container .line {
      vertical-align: top;
      width: 100%;
      height: 2px;
      margin: 25px 0;
      background: linear-gradient(90deg, transparent, #e0e0e0, transparent);
    }

    .p-input-container .url-box,
    .file-box {
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }

    .p-input-container .url-box input {
      margin-bottom: 20px;
      display: block;
      width: 100%;
      padding: 16px 20px;
      font-size: 16px;
      border-radius: 12px;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
      color: #333;
      border: 2px solid #e0e0e0;
      transition: all 0.3s ease;
      font-family: 'Monaco', 'Menlo', monospace;
    }

    .p-input-container .url-box input:focus {
      outline: none;
      border-color: #3D8AC7;
      box-shadow: 0 0 0 4px rgba(61, 138, 199, 0.1);
    }

    .p-input-container .url-box input::placeholder {
      color: #aaa;
    }

    .p-input-container .input-box,
    .url-box div {
      position: relative;
      display: inline-block;
      width: 100%;
      line-height: 1.5;
      box-sizing: border-box;
      padding: 18px 30px;
      font-size: 16px;
      color: white;
      cursor: pointer;
      border-radius: 12px;
      border: none;
      background: linear-gradient(135deg, #3D8AC7 0%, #2980b9 100%);
      box-shadow: 0 4px 15px rgba(61, 138, 199, 0.3);
      transition: all 0.3s ease;
      font-weight: 600;
    }

    .p-input-container .input-box:hover,
    .url-box div:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(61, 138, 199, 0.4);
    }

    .p-input-container .input-box {
      background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
      box-shadow: 0 4px 15px rgba(46, 204, 113, 0.3);
    }

    .p-input-container .input-box:hover {
      box-shadow: 0 6px 20px rgba(46, 204, 113, 0.4);
    }

    .p-input-container .input-box input {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      cursor: pointer;
    }

    .p-input-container .url-box div {
      width: 100%;
    }

    /* Á§æÂå∫‰ø°ÊÅØÊ†∑Âºè */
    .m-p-tips {
      margin: 20px auto;
      max-width: 1100px;
      background: white !important;
      border: none !important;
      border-radius: 16px !important;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08) !important;
      padding: 30px !important;
    }

    /*icon ÂàóË°®Ê†∑Âºè*/
    .p-icons-container {
      margin: 20px auto;
      padding: 20px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }

    .p-icon-item {
      margin: 8px;
      padding: 4px 0px 8px;
      display: inline-block;
      text-align: center;
      border-radius: 12px;
      cursor: pointer;
      border: 2px solid #f0f0f0;
      overflow: hidden;
      white-space: pre-line;
      box-sizing: border-box;
      transition: all 0.3s ease;
      min-width: 100px;
    }

    .p-icon-item-background-0 {
      background-image: url(http://upyun.luckly-mjw.cn/Assets/base-source/png-background.png);
    }

    .p-icon-item-background-1 {
      background-color: #FCFCFC;
    }

    .p-icon-item-background-2 {
      background-color: #f5f5f5;
    }

    .p-icon-item:hover {
      background: #ffffff;
      border-color: #3D8AC7;
      box-shadow: 0 8px 25px rgba(61, 138, 199, 0.2);
      transform: translateY(-5px);
    }

    .p-icon-item:active {
      color: white;
      background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
      border-color: transparent;
      transform: translateY(0);
    }

    .p-icon-item .iconfont {
      margin: 0 20px;
      padding: 4px;
      border-radius: 8px;
      font-size: 32px;
    }

    .p-icon-item .name {
      font-size: 14px;
      font-weight: bolder;
      color: #333;
      margin-top: 8px;
    }

    .p-icon-item .value {
      font-size: 13px;
      font-weight: bold;
      color: #888;
      margin-top: 4px;
      font-family: 'Monaco', 'Menlo', monospace;
    }

    .p-icon-item svg {
      width: 40px;
      height: 40px;
    }

    /* ÂìçÂ∫îÂºèË∞ÉÊï¥ */
    @media (max-width: 768px) {
      #iconfont-preview {
        padding: 15px 20px 80px;
      }

      .p-action {
        font-size: 24px;
      }

      .p-local-fonts-container,
      .p-input-container,
      .m-p-tips {
        padding: 20px !important;
        margin: 15px auto;
      }

      .p-local-fonts-header {
        flex-direction: column;
        gap: 10px;
        text-align: center;
      }

      .p-local-fonts-title {
        justify-content: center;
      }

      .p-font-item {
        flex-wrap: wrap;
      }

      .p-font-item-size {
        margin-top: 10px;
        width: 100%;
        text-align: center;
      }

      .p-local-fonts-actions {
        flex-direction: column;
      }

      .p-local-fonts-btn {
        width: 100%;
      }

      .p-copy-type,
      .p-change-background,
      .p-show-all,
      .p-reset {
        position: static;
        display: block;
        margin: 5px auto;
        width: 80%;
      }
    }
  </style>
</head>

<body>
  <!-- Âõ∫ÂÆöÊåâÈíÆÁªÑ - ÊîæÂú® Vue ÂÆû‰æãÂ§ñÈÉ® -->
  <a class="p-help" target="_blank" href="https://segmentfault.com/a/1190000020121850">?</a>
  <a class="p-node-script" title="‰∏ãËΩΩ Node ËÑöÊú¨ÔºåÊú¨Âú∞ËøêË°åÂêéÂèØÊâ´ÊèèÂ≠ó‰ΩìÊñá‰ª∂" href="javascript:void(0)" onclick="downloadNodeScript()">üì¶ Node Êâ´ÊèèËÑöÊú¨</a>
  <a class="p-tamper" target="_blank" href="https://blog.luckly-mjw.cn/tool-show/iconfont-preview/iconfont-preview.user.js">Ê∑ªÂä†Ê≤πÁå¥Êèí‰ª∂</a>
  <a class="p-github" target="_blank" href="https://github.com/Momo707577045/iconfont-preview">github</a>
  <a class="p-other" target="_blank" href="http://blog.luckly-mjw.cn/tool-show/index.html">ÂÖ∂‰ªñÂÆûÁî®Â∑•ÂÖ∑</a>

  <section id="iconfont-preview" v-cloak>
    <!--È°∂ÈÉ®Êìç‰ΩúÊèêÁ§∫-->
    <section class="p-action g-box">{{tips}}</section>
    <div v-if="iconList.length > 0" class="p-copy-type" @click="copyType = copyType === 'value' ? 'name' : 'value'">Â§çÂà∂ {{ copyType }}</div>
    <div v-if="iconList.length > 0" class="p-change-background" @click="backgroundIndex = (backgroundIndex + 1) % 3">ÂàáÊç¢ËÉåÊôØ</div>
    <div v-if="iconList.length > 0 && bufferStr" class="p-show-all" @click="showAll">ÊòæÁ§∫ÂâØÊú¨ unicode</div>
    <div v-if="iconList.length > 0" class="p-reset" @click="reload">ÈáçÊñ∞ËΩΩÂÖ•</div>
    <!--Êú¨Âú∞Â≠ó‰ΩìÈÄâÊã©Âô®ÔºàÈÄöËøá host ÂèÇÊï∞ÊøÄÊ¥ªÔºâ-->
    <section class="p-local-fonts-container" v-if="iconList.length === 0 && hostApi">
      <div class="p-local-fonts-header">
        <div class="p-local-fonts-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z"></path>
            <path d="M14 8H8"></path>
            <path d="M16 12H8"></path>
            <path d="M13 16H8"></path>
          </svg>
          Êú¨Âú∞Â≠ó‰ΩìÊñá‰ª∂Êâ´Êèè
        </div>
        <span class="p-local-fonts-status" :class="{ connected: localFontsConnected, error: localFontsError }">
          {{ localFontsStatus }}
        </span>
      </div>
      
      <!-- Âä†ËΩΩ‰∏≠ -->
      <div class="p-local-fonts-loading" v-if="localFontsLoading">
        <div class="spinner"></div>
        <div>Ê≠£Âú®Êâ´ÊèèÊú¨Âú∞Â≠ó‰ΩìÊñá‰ª∂...</div>
      </div>
      
      <!-- ÈîôËØØÁä∂ÊÄÅ -->
      <div class="p-local-fonts-empty" v-else-if="localFontsError">
        <p style="color: #c62828; margin-bottom: 15px;">{{ localFontsErrorMsg }}</p>
        <button class="p-local-fonts-btn secondary" @click="fetchLocalFonts">ÈáçËØïËøûÊé•</button>
      </div>
      
      <!-- Á©∫ÂàóË°® -->
      <div class="p-local-fonts-empty" v-else-if="localFonts.length === 0 && localFontsConnected">
        <p>Êú™Âú®Êâ´ÊèèÁõÆÂΩï‰∏≠ÊâæÂà∞Â≠ó‰ΩìÊñá‰ª∂</p>
        <p class="p-scan-path">Êâ´ÊèèË∑ØÂæÑ: {{ localFontsScanPath }}</p>
      </div>
      
      <!-- Â≠ó‰ΩìÂàóË°® -->
      <template v-else-if="localFonts.length > 0">
        <div class="p-local-fonts-list">
          <div 
            v-for="(font, index) in localFonts" 
            :key="index"
            class="p-font-item" 
            :class="{ selected: selectedLocalFont === font.relativePath }"
            @click="selectedLocalFont = font.relativePath"
          >
            <input 
              type="radio" 
              :value="font.relativePath" 
              v-model="selectedLocalFont"
              @click.stop
            >
            <div class="p-font-item-info">
              <div class="p-font-item-name">{{ font.name }}</div>
              <div class="p-font-item-path">{{ font.relativePath }}</div>
            </div>
            <span class="p-font-item-size">{{ formatFileSize(font.size) }}</span>
          </div>
        </div>
        <p class="p-scan-path">Êâ´ÊèèË∑ØÂæÑ: {{ localFontsScanPath }}</p>
        <div class="p-local-fonts-actions">
          <button class="p-local-fonts-btn secondary" @click="fetchLocalFonts">Âà∑Êñ∞ÂàóË°®</button>
          <button class="p-local-fonts-btn" :disabled="!selectedLocalFont" @click="loadSelectedFont">Âä†ËΩΩÈÄâ‰∏≠Â≠ó‰Ωì</button>
        </div>
      </template>
    </section>
    
    <!--Êñá‰ª∂ËΩΩÂÖ•ÔºàÂßãÁªàÊòæÁ§∫Ôºâ-->
    <section class="p-input-container" v-if="iconList.length === 0">
      <div class="url-box">
        <input type="text" v-model="url" placeholder="Âú®Á∫ø ttf„ÄÅwoff„ÄÅwoff2„ÄÅcss Êàñ js ÈìæÊé•" v-on:keyup.enter="getURLFile">
        <div @click="getURLFile">Á∫ø‰∏äÈìæÊé•È¢ÑËßà</div>
      </div>
      <div class="line"></div>
      <div class="file-box">
        <div class="input-box" v-if="iconList.length === 0">
          <label>Ëß£ÊûêÊú¨Âú∞ ttf„ÄÅwoff„ÄÅwoff2„ÄÅotf Êñá‰ª∂</label>
          <input type="file" @change="getLocalTTF" accept=".ttf,.woff,.woff2,.otf">
        </div>
      </div>
    </section>
    <div v-if="iconList.length === 0" class="m-p-tips" style="border: 1px solid #eeeeee; padding: 20px; border-radius: 10px;">
      <div style="display: flex; align-items: center; justify-content: center; margin-top: 20px; font-weight: bolder; font-size: 30px; color: #24292e;">
        <svg style="color: rgb(59, 130, 246); margin-right: 20px;" xmlns="http://www.w3.org/2000/svg" width="34" height="34" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users text-blue-500">
          <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
          <circle cx="9" cy="7" r="4"></circle>
          <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
        </svg>Âä†ÂÖ•Êàë‰ª¨ÁöÑÁ§æÂå∫
      </div>
      <div style="color: #999999;font-size: 14px; font-weight: normal;text-align: center;">(Áæ§Â∑≤Êª°ÂëòÔºåËØ∑Ê∑ªÂä† mjw707577045 Âä†Áæ§)</div>
      <div style="display: flex; align-items: center; justify-content: center; margin-top: 20px;">
        <img src="https://upyun.luckly-mjw.cn/Assets/qrcode/tools.jpeg" alt="ÊïàÁéáÂ∑•ÂÖ∑" title="logo" />
      </div>
    </div>
    <!--icon Â±ïÁ§∫-->
    <section v-else>
      <div v-for="item in iconList" class="p-icon-item" :class="[`p-icon-item-background-${backgroundIndex}`]" @click="copyToClipboard(item[copyType])">
        <svg v-if="isSymbol" class="icon" aria-hidden="true" v-html="`<use xlink:href='${item.value}'></use>`"></svg>
        <p v-else class="iconfont" v-html="isCSS ? '' : item.show" :class="isCSS ? item.show : '' "></p>
        <p class="name">{{item.name}}</p>
        <p class="value">{{item.value}}</p>
      </div>
    </section>
  </section>
</body>
<script>
  var _hmt = _hmt || [];
  (function () {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?1f12b0865d866ae1b93514870d93ce89";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>
<!--vue ÂâçÁ´ØÊ°ÜÊû∂-->
<script src="https://upyun.luckly-mjw.cn/lib/vue.js"></script>
<!--woff2ÂâçÁΩÆËß£Á†ÅÂ∫ì-->
<script src="https://upyun.luckly-mjw.cn/lib/woff2-decode.js"></script>
<!--ttfÊñá‰ª∂Ëß£ÊûêÂ∫ì-->
<script src="https://upyun.luckly-mjw.cn/lib/opentype.min.js"></script>
<script>
  // Node.js Êâ´ÊèèËÑöÊú¨‰∏ãËΩΩÂáΩÊï∞
  function downloadNodeScript() {
    const scriptUrl = 'https://blog.luckly-mjw.cn/tool-show/iconfont-preview/font-searcher.js';
    
    fetch(scriptUrl)
      .then(response => {
        if (!response.ok) {
          throw new Error('ÁΩëÁªúËØ∑Ê±ÇÂ§±Ë¥•: ' + response.status);
        }
        return response.blob();
      })
      .then(blob => {
        // ÂàõÂª∫‰∏ãËΩΩÈìæÊé•
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'font-searcher.js';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      })
      .catch(error => {
        alert('‰∏ãËΩΩÂ§±Ë¥•: ' + error.message);
        console.error('‰∏ãËΩΩËÑöÊú¨Â§±Ë¥•:', error);
      });
  }
</script>
<script>
  // scriptÊ≥®ÂÖ•
  const WOFF2_DECODE = Module

  new Vue({
    el: '#iconfont-preview',

    data() {
      return {
        backgroundIndex: 0, // Âç°ÁâåËÉåÊôØÈ¢úËâ≤
        url: '//at.alicdn.com/t/font_1349299_kjq7u4s9t8m.css', // Âú®Á∫øÈìæÊé•
        tips: 'ËØ∑ÈÄâÊã©Â≠ó‰ΩìÊñá‰ª∂Ê∫ê', // È°∂ÈÉ®ÊèêÁ§∫
        timeouter: 0, // Êìç‰ΩúÊèêÁ§∫ËÆ°Êó∂Âô®
        copyType: 'value', // icon Â§çÂà∂Á±ªÂûã
        bufferStr: null, // Â≠ó‰ΩìÁºñÁ†ÅÂÜÖÂÆπ
        isSymbol: false, // ÊòØÂê¶ symbol Ê®°Âºè
        isCSS: false, // ÊòØÂê¶ css Êñá‰ª∂ÈìæÊé•
        iconList: [], // icon ÂàóË°®
        
        // Êú¨Âú∞Â≠ó‰ΩìÊâ´ÊèèÁõ∏ÂÖ≥
        hostApi: '', // Êú¨Âú∞ API Âú∞ÂùÄÔºà‰ªé host ÂèÇÊï∞Ëé∑ÂèñÔºâ
        localFonts: [], // Êú¨Âú∞Â≠ó‰ΩìÊñá‰ª∂ÂàóË°®
        localFontsLoading: false, // Âä†ËΩΩÁä∂ÊÄÅ
        localFontsConnected: false, // ËøûÊé•Áä∂ÊÄÅ
        localFontsError: false, // ÈîôËØØÁä∂ÊÄÅ
        localFontsErrorMsg: '', // ÈîôËØØ‰ø°ÊÅØ
        localFontsScanPath: '', // Êâ´ÊèèË∑ØÂæÑ
        selectedLocalFont: '', // ÈÄâ‰∏≠ÁöÑÂ≠ó‰ΩìÊñá‰ª∂Ë∑ØÂæÑ
      }
    },

    computed: {
      // Êú¨Âú∞Â≠ó‰ΩìËøûÊé•Áä∂ÊÄÅÊñáÂ≠ó
      localFontsStatus() {
        if (this.localFontsLoading) return 'ËøûÊé•‰∏≠...';
        if (this.localFontsError) return 'ËøûÊé•Â§±Ë¥•';
        if (this.localFontsConnected) return `Â∑≤ËøûÊé• (${this.localFonts.length} ‰∏™Â≠ó‰Ωì)`;
        return 'Êú™ËøûÊé•';
      }
    },

    // Ëé∑ÂèñÈìæÊé•‰∏≠Êê∫Â∏¶ÁöÑËµÑÊ∫êÈìæÊé•
    created() {
      const urlObj = new URL(location.href)
      
      // Ê£ÄÊü• host ÂèÇÊï∞
      const host = urlObj.searchParams.get('host')
      if (host) {
        this.hostApi = decodeURIComponent(host)
        this.tips = 'Êú¨Âú∞Â≠ó‰ΩìÊâ´ÊèèÊ®°Âºè'
        this.fetchLocalFonts()
        return
      }
      
      // ÂéüÊúâÈÄªËæëÔºöÊ£ÄÊü• source ÂèÇÊï∞
      const url = urlObj.searchParams.get('source')
      if (url) {
        this.url = decodeURIComponent(url)
        this.getURLFile()
      }
    },

    methods: {

      // ajax ËØ∑Ê±Ç
      ajax(options) {
        options = options || {};
        let xhr = new XMLHttpRequest();
        if (options.type === 'buffer') {
          xhr.responseType = 'arraybuffer';
        }

        xhr.onreadystatechange = function () {
          if (xhr.readyState === 4) {
            let status = xhr.status;
            if (status >= 200 && status < 300) {
              console.log(xhr)
              options.success && options.success(xhr.response);
            } else {
              options.fail && options.fail(status);
            }
          }
        };

        xhr.open("GET", options.url, true);
        xhr.send(null);
      },

      // Ëé∑ÂèñÂú®Á∫øÊñá‰ª∂
      getURLFile() {
        if (!this.url) {
          alert('ËØ∑ËæìÂÖ•ÈìæÊé•')
          return
        }

        // Âú®‰∏ãËΩΩÈ°µÈù¢ÊâçËß¶ÂèëÔºå‰øÆÊîπÈ°µÈù¢ URLÔºåÊê∫Â∏¶‰∏ãËΩΩË∑ØÂæÑÔºåÈÅøÂÖçÂà∑Êñ∞Âêé‰∏¢Â§±
        if (location.href.includes('blog.luckly-mjw.cn')) {
          const urlObj = new URL(location.href)
          urlObj.searchParams.set('source', encodeURIComponent(this.url))
          window.history.replaceState(null, '', urlObj.href)
        }

        if (/(ttf|woff2|woff)/.test(this.url.toLowerCase())) {
          this.getOnlineTTF()
        } else if (this.url.toLowerCase().indexOf('.css') !== -1) {
          this.getOnlineCSS()
        } else if (this.url.toLowerCase().indexOf('.js') !== -1) {
          this.getOnlineJS()
        }

      },

      // Ëß£ÊûêÊú¨Âú∞ ttf Êñá‰ª∂
      getLocalTTF(event) {
        // Ëß£ÊûêÊñá‰ª∂ÂÜÖÂÆπ
        let file = event.target.files[0]
        let reader = new FileReader();
        reader.readAsArrayBuffer(file);
        reader.onload = (evt) => { this.parseIcon(evt.target.result, false, /woff2/.test(file.name)); }

        // base64 ÁºñÁ†ÅÔºåÂä®ÊÄÅÂä†ÂÖ• @font-face
        let readerBase64 = new FileReader();
        readerBase64.readAsDataURL(file)
        readerBase64.onload = (evt) => { this.setStyle(evt.target.result) }
      },

      // Ëß£ÊûêÂú®Á∫ø ttf Êñá‰ª∂
      getOnlineTTF() {
        // ËøúÁ®ãËé∑ÂèñÊñá‰ª∂
        this.ajax({
          url: this.url,
          type: 'buffer',
          success: (params) => { this.parseIcon(params, false, /woff2/.test(this.url)) },
          fail: () => {
            alert('ÈìæÊé•Êó†ÊïàÊàñË∑®ÂüüÔºåË∑®ÂüüÊó∂ËØ∑Ôºå‰ΩøÁî®Âè≥‰∏ãËßíÁöÑÊ≤πÁå¥ËÑöÊú¨Ôºå‰ΩøÁî®„ÄåÊ≥®ÂÖ•Ëß£Êûê„ÄçÂäüËÉΩ')
          }
        })

        this.setStyle(this.url)
      },

      // Ëß£Êûê CSS Êñá‰ª∂
      getOnlineCSS() {
        // ËøúÁ®ãËé∑ÂèñÊñá‰ª∂
        this.isCSS = true;
        this.ajax({
          url: this.url,
          success: (params) => {
            this.setStyle('', params)
            params.replace(/\.([^:^ ]+):[\s\S]+?content: "\\([^"]+)";/gi, (...item) => {
              this.iconList.push({
                show: item[1],
                name: item[1],
                value: `&#${item[2]};`,
              })
            })
            this.tips = 'ÁÇπÂáªÂ§çÂà∂icon‰ª£Á†Å'
          },
          fail: () => {
            alert('ÈìæÊé•ÈîôËØØÊàñË∑®ÂüüÔºåË∑®ÂüüÊó∂ËØ∑‰ΩøÁî®„ÄåÊ≥®ÂÖ•Ëß£Êûê„ÄçÂäüËÉΩ')
          }
        })
      },

      // Ëß£Êûê JS Êñá‰ª∂
      getOnlineJS() {
        // ËøúÁ®ãËé∑ÂèñÊñá‰ª∂
        this.isSymbol = true;
        this.ajax({
          url: this.url,
          success: (params) => {
            let $script = document.createElement('script')
            $script.src = this.url
            document.body.append($script);
            // console.log(params)

            //id="iconexchange"
            params.replace(/id="([^"]+)"/gi, (...item) => {
              this.iconList.push({
                show: item[1].replace(/icon/, ''),
                name: item[1].replace(/icon/, ''),
                value: `#${item[1]}`,
              })
            })
            this.tips = 'ÁÇπÂáªÂ§çÂà∂icon‰ª£Á†Å'
          },
          fail: () => {
            alert('ÈìæÊé•ÈîôËØØÊàñË∑®ÂüüÔºåË∑®ÂüüÊó∂ËØ∑‰ΩøÁî®„ÄåÊ≥®ÂÖ•Ëß£Êûê„ÄçÂäüËÉΩ')
          }
        })
      },

      // ÊâìÂºÄÊâÄÊúâÂâØÊú¨
      showAll() {
        this.parseIcon(this.bufferStr, true)
      },

      // Ëß£Êûêicon
      async parseIcon(bufferStr, showAll, isWoff2) {
        this.bufferStr = bufferStr
        this.iconList = []
        const bufferAfterDecode = isWoff2 ? Uint8Array.from(WOFF2_DECODE.decompress(this.bufferStr)).buffer : this.bufferStr;
        let result = window.opentype.parse(bufferAfterDecode);
        for (let key in result.glyphs.glyphs) {
          let item = result.glyphs.glyphs[key]
          if (!item.unicode) {
          } else if (showAll) { // ÊòØÂê¶ÊòæÁ§∫ÊâÄÊúâ unicodes
            let valueStr = ''
            item.unicodes.forEach(unicode => valueStr += `&#${unicode};\n`)
            this.iconList.push({
              name: item.name,
              value: valueStr,
              show: `&#${item.unicode};`
            })
          } else {
            this.iconList.push({
              name: item.name,
              show: `&#${item.unicode};`,
              value: `&#${item.unicode};`
            })
          }
        }
        this.iconList.forEach(item => {
          item.value = item.value.replace(/&#([^;]+);/ig, (target, value) => {
            return `&#x${parseInt(value).toString(16)};`
          })
        })
        this.tips = 'ÁÇπÂáªÂ§çÂà∂icon‰ª£Á†Å'
      },

      // Ê∑ªÂä†style
      setStyle(url, cssFile) {
        let $style = document.createElement('style')
        if (cssFile) {
          $style.innerHTML = cssFile
        } else {
          $style.innerHTML = `
        @font-face {
  font-family: 'iconfont';
  src: url('${url}') format('truetype');
}
.iconfont {
  font-family: "iconfont" !important;
  font-size: 24px;font-style: normal;
  -webkit-font-smoothing: antialiased;
  -webkit-text-stroke-width: 0.2px;
  -moz-osx-font-smoothing: grayscale;
}`;
        }

        document.body.append($style);
      },

      // Êã∑Ë¥ùÂâ™ÂàáÊùø
      copyToClipboard(content) {
        clearTimeout(this.timeouter)
        this.tips = `Â§çÂà∂ÊàêÂäü: ${content}`
        this.timeouter = setTimeout(() => { this.tips = `ÁÇπÂáªÂ§çÂà∂icon‰ª£Á†Å` }, 1000)

        if (!document.queryCommandSupported('copy')) {
          return false
        }

        let $input = document.createElement('input')
        $input.style.opacity = '0'
        $input.value = content
        document.body.appendChild($input)
        $input.select()

        const result = document.execCommand('copy')
        document.body.removeChild($input)
        $input = null

        return result
      },

      // È°µÈù¢ÈáçÊñ∞Âä†ËΩΩ
      reload() {
        const urlObj = new URL(location.href)
        urlObj.searchParams.delete('source')
        location.href = urlObj.href
      },

      // ===== Êú¨Âú∞Â≠ó‰ΩìÊâ´ÊèèÁõ∏ÂÖ≥ÊñπÊ≥ï =====
      
      // Ëé∑ÂèñÊú¨Âú∞Â≠ó‰ΩìÊñá‰ª∂ÂàóË°®
      fetchLocalFonts() {
        if (!this.hostApi) return;
        
        this.localFontsLoading = true;
        this.localFontsError = false;
        this.localFontsErrorMsg = '';
        this.localFontsConnected = false;
        
        const apiUrl = `${this.hostApi}/api/fonts`;
        
        fetch(apiUrl)
          .then(response => {
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            return response.json();
          })
          .then(data => {
            this.localFontsLoading = false;
            this.localFontsConnected = true;
            this.localFonts = data.fonts || [];
            this.localFontsScanPath = data.scanPath || '';
            this.tips = `Â∑≤Êâ´ÊèèÂà∞ ${this.localFonts.length} ‰∏™Â≠ó‰ΩìÊñá‰ª∂`;
            
            // Â¶ÇÊûúÂè™Êúâ‰∏Ä‰∏™Â≠ó‰ΩìÔºåËá™Âä®ÈÄâ‰∏≠
            if (this.localFonts.length === 1) {
              this.selectedLocalFont = this.localFonts[0].relativePath;
            }
          })
          .catch(error => {
            this.localFontsLoading = false;
            this.localFontsError = true;
            this.localFontsErrorMsg = `Êó†Ê≥ïËøûÊé•Âà∞Êú¨Âú∞ÊúçÂä°Âô®: ${error.message}„ÄÇËØ∑Á°Æ‰øùÂ∑≤ËøêË°å node index.js ËÑöÊú¨„ÄÇ`;
            this.tips = 'ËøûÊé•Êú¨Âú∞ÊúçÂä°Âô®Â§±Ë¥•';
            console.error('Ëé∑ÂèñÊú¨Âú∞Â≠ó‰ΩìÂàóË°®Â§±Ë¥•:', error);
          });
      },

      // Âä†ËΩΩÈÄâ‰∏≠ÁöÑÊú¨Âú∞Â≠ó‰Ωì
      loadSelectedFont() {
        if (!this.selectedLocalFont || !this.hostApi) return;
        
        this.tips = 'Ê≠£Âú®Âä†ËΩΩÂ≠ó‰ΩìÊñá‰ª∂...';
        
        // ÊûÑÂª∫Â≠ó‰ΩìÊñá‰ª∂ URL
        const fontUrl = `${this.hostApi}/api/font?path=${encodeURIComponent(this.selectedLocalFont)}`;
        
        // ‰ΩøÁî® fetch Ëé∑ÂèñÂ≠ó‰ΩìÊñá‰ª∂ÁöÑ ArrayBuffer
        fetch(fontUrl)
          .then(response => {
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            return response.arrayBuffer();
          })
          .then(buffer => {
            // Âà§Êñ≠ÊòØÂê¶‰∏∫ woff2 Ê†ºÂºè
            const isWoff2 = /\.woff2$/i.test(this.selectedLocalFont);
            
            // Ëß£ÊûêÂ≠ó‰ΩìÂõæÊ†á
            this.parseIcon(buffer, false, isWoff2);
            
            // ËÆæÁΩÆ @font-face Ê†∑Âºè
            this.setStyle(fontUrl);
          })
          .catch(error => {
            alert(`Âä†ËΩΩÂ≠ó‰ΩìÊñá‰ª∂Â§±Ë¥•: ${error.message}`);
            this.tips = 'Âä†ËΩΩÂ≠ó‰ΩìÊñá‰ª∂Â§±Ë¥•';
            console.error('Âä†ËΩΩÂ≠ó‰ΩìÊñá‰ª∂Â§±Ë¥•:', error);
          });
      },

      // Ê†ºÂºèÂåñÊñá‰ª∂Â§ßÂ∞è
      formatFileSize(bytes) {
        if (bytes === 0) return '0 B';
        const k = 1024;
        const sizes = ['B', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
      }
    }
  })
  // scriptÊ≥®ÂÖ•
</script>

</html>